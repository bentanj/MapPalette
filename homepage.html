<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MapPalette Feed</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        body {
            padding-top: 56px; /* Adjust for fixed navbar */
        }
        .navbar {
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,.1);
        }
        .navbar-brand {
            font-weight: bold;
            font-size: 1.5rem;
            color: #333 !important;
        }
        .nav-link {
            color: #333 !important;
            font-weight: 500;
        }
        .navbar-brand img,
        .profile-pic {
            height: 40px;
            width: auto;
        }
        .side-column {
            position: sticky;
            top: 76px; /* 56px for navbar + 20px padding */
            height: calc(100vh - 76px);
            overflow-y: auto;
        }
        .content {
            margin-top: 20px;
        }
        @media (max-width: 991px) {
            .profile-pic {
                margin-left: auto;
            }
            .side-column {
                position: static;
                height: auto;
            }
        }

        
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <img src="logo.png" alt="MapPalette Logo" class="d-inline-block align-text-top">
                MapPalette
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggler" aria-controls="navbarToggler" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarToggler">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active bg-primary rounded-pill px-3 fw-bold" aria-current="page" href="homepage.html">HomePage</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="routes.html">Routes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="draw.html">Draw</a>
                    </li>
                </ul>
                <div class="dropdown">
                    <a class="nav-link dropdown-toggle" href="#" role="button" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                        <img src="logo.png" alt="Profile" class="profile-pic">
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                        <li><a class="dropdown-item" href="#">Your Profile</a></li>
                        <li><a class="dropdown-item" href="#">Settings</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#">Log Out</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3 side-column">
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title">Friend List</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Alice</li>
                            <li class="list-group-item">Bob</li>
                            <li class="list-group-item">Charlie</li>
                            <li class="list-group-item">David</li>
                            <li class="list-group-item">Emma</li>
                        </ul>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Upcoming Events</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">City Marathon - Next Sunday</li>
                            <li class="list-group-item">Group Hike - Saturday, 8 AM</li>
                            <li class="list-group-item">Cycling Tour - Next Month</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-md-6 content">
                <div id="activity-feed"></div>
            </div>
            <div class="col-md-3 side-column">
                <div class="card mb-3">
                    <div class="card-body">
                        <h5 class="card-title">Recent Activities</h5>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Morning Run - 5km</li>
                            <li class="list-group-item">Cycling Trip - 20km</li>
                            <li class="list-group-item">Hiking Adventure - 3hrs</li>
                            <li class="list-group-item">Evening Walk - 2km</li>
                            <li class="list-group-item">Weekend Jog - 7km</li>
                        </ul>
                    </div>
                </div>
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Your Stats</h5>
                        <p class="card-text">Total Distance: 120km</p>
                        <p class="card-text">Activities This Week: 7</p>
                        <p class="card-text">Average Pace: 5:30 /km</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // The JavaScript for creating activity cards remains the same as in the previous version
        const activityFeed = document.getElementById('activity-feed');

        const activities = [
            {
                user: "Wei Shen",
                userImg: 'logo.png',
                date: "30 September 2024 at 21:33",
                location: "Central",
                title: "Night Run",
                distance: "6.05 km",
                description: "-placeholder-",
                pace: "4:58 /km",
                time: "30m 3s",
                mapImg: "map1.png"
            },
            {
                user: "Potato",
                userImg: 'logo.png',
                date: "Yesterday at 18:36",
                location: "Central",
                title: "Evening Run",
                description: "-placeholder-",
                distance: "2.40 km",
                pace: "4:15 /km",
                time: "10m 15s",
                mapImg: "map2.png"
            }
        ];

        function createActivityCard(activity) {
            const card = document.createElement('div');
            card.className = 'card mb-4 overflow-hidden';
            card.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';

            // Card header with user name and date
            const cardHeader = document.createElement('div');
            cardHeader.className = 'card-header bg-white border-0 py-3';
            card.appendChild(cardHeader);

            const userInfo = document.createElement('div');
            userInfo.className = 'd-flex justify-content-between align-items-center';
            cardHeader.appendChild(userInfo);

            // User profile photo and name container
            const userProfileContainer = document.createElement('div');
            userProfileContainer.className = 'd-flex align-items-center';
            userInfo.appendChild(userProfileContainer);

            // User profile photo
            const userProfilePhoto = document.createElement('img');
            userProfilePhoto.src = activity.userImg;
            userProfilePhoto.alt = `${activity.user}'s profile photo`;
            userProfilePhoto.className = 'rounded-circle me-2';
            userProfilePhoto.style.width = '40px';
            userProfilePhoto.style.height = '40px';
            userProfilePhoto.style.objectFit = 'cover';
            userProfileContainer.appendChild(userProfilePhoto);

            // User name
            const userName = document.createElement('h3');
            userName.className = 'mb-0 fw-bold';
            userName.textContent = activity.user;
            userProfileContainer.appendChild(userName);

            const date = document.createElement('small');
            date.className = 'text-muted';
            date.textContent = activity.date;
            userInfo.appendChild(date);

            // Image container
            const imageContainer = document.createElement('div');
            imageContainer.className = 'position-relative';
            card.appendChild(imageContainer);

            // Image
            if (activity.mapImg) {
                const img = document.createElement('img');
                img.src = activity.mapImg;
                img.className = 'card-img-top';
                img.alt = 'Activity Map';
                img.style.height = '300px'; // Increased height for more space
                img.style.objectFit = 'cover';
                imageContainer.appendChild(img);
            }

            // Overlay with activity title and location
            const overlay = document.createElement('div');
            overlay.className = 'position-absolute bottom-0 start-0 w-100 p-3';
            overlay.style.background = 'linear-gradient(to top, rgba(0,0,0,0.7), rgba(0,0,0,0))';
            imageContainer.appendChild(overlay);

            const activityTitle = document.createElement('h5');
            activityTitle.className = 'text-white mb-0';
            activityTitle.textContent = activity.title;
            overlay.appendChild(activityTitle);

            const location = document.createElement('small');
            location.className = 'text-white-50';
            location.textContent = activity.location;
            overlay.appendChild(location);

            // Card body
            const cardBody = document.createElement('div');
            cardBody.className = 'card-body';
            card.appendChild(cardBody);

            // Activity stats
            const stats = document.createElement('div');
            stats.className = 'd-flex justify-content-between text-center mb-3';
            cardBody.appendChild(stats);

            const createStat = (label, value) => {
                const stat = document.createElement('div');
                const statValue = document.createElement('h6');
                statValue.className = 'mb-0 fw-bold';
                statValue.textContent = value;
                const statLabel = document.createElement('small');
                statLabel.className = 'text-muted';
                statLabel.textContent = label;
                stat.appendChild(statValue);
                stat.appendChild(statLabel);
                return stat;
            };

            stats.appendChild(createStat('Distance', activity.distance));
            stats.appendChild(createStat('Pace', activity.pace));
            stats.appendChild(createStat('Time', activity.time));

            // Description
            if (activity.description) {
                const description = document.createElement('p');
                description.className = 'card-text';
                description.textContent = activity.description;
                cardBody.appendChild(description);
            }

            // Button container
            const buttonContainer = document.createElement('div');
            buttonContainer.className = 'd-flex justify-content-between align-items-center mt-3';
            cardBody.appendChild(buttonContainer);

            // Thumbs up button
            const thumbsUpBtn = document.createElement('button');
            thumbsUpBtn.className = 'btn btn-outline-primary btn-sm';
            thumbsUpBtn.innerHTML = '<i class="bi bi-hand-thumbs-up"></i> Like';
            thumbsUpBtn.addEventListener('click', function() {
                console.log('Thumbs up clicked for:', activity.title);
                // Add your thumbs up logic here
            });
            buttonContainer.appendChild(thumbsUpBtn);

            // Comment button
            const commentBtn = document.createElement('button');
            commentBtn.className = 'btn btn-outline-secondary btn-sm';
            commentBtn.setAttribute('data-bs-toggle', 'modal');
            commentBtn.setAttribute('data-bs-target', `#commentModal${activity.id}`);

            const icon = document.createElement('i');
            icon.className = 'bi bi-chat';

            const textNode = document.createTextNode(' Comment');

            commentBtn.appendChild(icon);
            commentBtn.appendChild(textNode);

            buttonContainer.appendChild(commentBtn);

            return card;
        }

        function createCommentModal(activity) {
            const modal = document.createElement('div');
            modal.className = 'modal fade';
            modal.id = `commentModal${activity.id}`;
            modal.tabIndex = '-1';
            modal.setAttribute('aria-labelledby', `commentModalLabel${activity.id}`);
            modal.setAttribute('aria-hidden', 'true');

            const modalDialog = document.createElement('div');
            modalDialog.className = 'modal-dialog modal-lg';
            modal.appendChild(modalDialog);

            const modalContent = document.createElement('div');
            modalContent.className = 'modal-content';
            modalDialog.appendChild(modalContent);

            // Modal Header
            const modalHeader = document.createElement('div');
            modalHeader.className = 'modal-header';
            modalContent.appendChild(modalHeader);

            const modalTitle = document.createElement('h5');
            modalTitle.className = 'modal-title';
            modalTitle.id = `commentModalLabel${activity.id}`;
            modalTitle.textContent = `${activity.title} by ${activity.user}`;
            modalHeader.appendChild(modalTitle);

            const closeButton = document.createElement('button');
            closeButton.type = 'button';
            closeButton.className = 'btn-close';
            closeButton.setAttribute('data-bs-dismiss', 'modal');
            closeButton.setAttribute('aria-label', 'Close');
            modalHeader.appendChild(closeButton);

            // Modal Body
            const modalBody = document.createElement('div');
            modalBody.className = 'modal-body';
            modalContent.appendChild(modalBody);

            // Activity details
            const details = document.createElement('p');
            details.textContent = `${activity.date} • ${activity.location}`;
            modalBody.appendChild(details);

            const description = document.createElement('p');
            description.textContent = activity.description;
            modalBody.appendChild(description);

            const stats = document.createElement('p');
            stats.textContent = `Distance: ${activity.distance} | Pace: ${activity.pace} | Time: ${activity.time}`;
            modalBody.appendChild(stats);

            if (activity.mapImg) {
                const mapImage = document.createElement('img');
                mapImage.src = activity.mapImg;
                mapImage.className = 'img-fluid mb-3';
                mapImage.alt = 'Activity Map';
                modalBody.appendChild(mapImage);
            }

            // Comments section
            const commentsHeader = document.createElement('h6');
            commentsHeader.textContent = 'Comments';
            modalBody.appendChild(commentsHeader);

            const commentList = document.createElement('div');
            commentList.id = `commentList${activity.id}`;
            commentList.className = 'mb-3';
            modalBody.appendChild(commentList);

            const commentForm = document.createElement('form');
            commentForm.className = 'mb-3';
            modalBody.appendChild(commentForm);

            const commentInput = document.createElement('textarea');
            commentInput.className = 'form-control mb-2';
            commentInput.rows = '3';
            commentInput.placeholder = 'Add a comment...';
            commentForm.appendChild(commentInput);

            const submitButton = document.createElement('button');
            submitButton.type = 'submit';
            submitButton.className = 'btn btn-primary';
            submitButton.textContent = 'Post Comment';
            commentForm.appendChild(submitButton);

            commentForm.addEventListener('submit', function(e) {
                e.preventDefault();
                addComment(activity.id, commentInput.value);
                commentInput.value = '';
            });

            return modal;
        }

        function addComment(activityId, commentText) {
            const commentList = document.getElementById(`commentList${activityId}`);
            
            const commentElement = document.createElement('div');
            commentElement.className = 'card mb-2';
            
            const cardBody = document.createElement('div');
            cardBody.className = 'card-body';
            
            const commentParagraph = document.createElement('p');
            commentParagraph.className = 'card-text';
            commentParagraph.textContent = commentText;
            
            const timestampParagraph = document.createElement('p');
            timestampParagraph.className = 'card-text';
            
            const timestampSmall = document.createElement('small');
            timestampSmall.className = 'text-muted';
            timestampSmall.textContent = 'Posted just now';
            
            timestampParagraph.appendChild(timestampSmall);
            cardBody.appendChild(commentParagraph);
            cardBody.appendChild(timestampParagraph);
            commentElement.appendChild(cardBody);
            
            commentList.appendChild(commentElement);
        }

        // Create activity cards and modals
        activities.forEach(activity => {
            activityFeed.appendChild(createActivityCard(activity));
            document.body.appendChild(createCommentModal(activity));
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>